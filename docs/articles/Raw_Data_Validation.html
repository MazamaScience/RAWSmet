<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Raw Data Validation • RAWSmet</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Raw Data Validation">
<meta property="og:description" content="RAWSmet">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RAWSmet</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.5.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/RAWSmet.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Developer_Style_Guide.html">Developer Style Guide</a>
    </li>
    <li>
      <a href="../articles/Raw_Data_Validation.html">Raw Data Validation</a>
    </li>
    <li>
      <a href="../articles/Working_with_openair.html">Working With openair</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/MazamaScience/RAWSmet/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Raw Data Validation</h1>
                        <h4 data-toc-skip class="author">Jonathan
Callahan</h4>
            
            <h4 data-toc-skip class="date">3/12/2022</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MazamaScience/RAWSmet/blob/HEAD/vignettes/articles/Raw_Data_Validation.Rmd" class="external-link"><code>vignettes/articles/Raw_Data_Validation.Rmd</code></a></small>
      <div class="hidden name"><code>Raw_Data_Validation.Rmd</code></div>

    </div>

    
    
<p>In ths document, we will examine raw data obtained from <a href="https://cefa.dri.edu/raws/fw13/" class="external-link uri">https://cefa.dri.edu/raws/fw13/</a> and do some basic
exploratory statitics to better understand any data quality issues that
might exist.</p>
<hr>
<div class="section level2">
<h2 id="download-and-parse-nwsid-040203">Download and Parse NWSID 040203<a class="anchor" aria-label="anchor" href="#download-and-parse-nwsid-040203"></a>
</h2>
<p>Here, we use the <strong>RAWSmet</strong> package to download and
parse data for a single location. No cleanup or QC is performed. We are
only bringing the data into memory in R so we can analyze it.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/MazamaScience/RAWSmet" class="external-link">RAWSmet</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/setRawsDataDir.html">setRawsDataDir</a></span><span class="op">(</span><span class="st">"~/Data/RAWS"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Load data for NWSID 040203 -- "BLUE RIDGE (KNF)"</span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/cefa_downloadData.html">cefa_downloadData</a></span><span class="op">(</span>nwsID <span class="op">=</span> <span class="st">"040203"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/cefa_parseData.html">cefa_parseData</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Show variables</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "recordType"          "nwsID"               "observationDate"    </span></span>
<span><span class="co">##  [4] "observationTime"     "observationType"     "weatherCode"        </span></span>
<span><span class="co">##  [7] "dryBulbTemp"         "atmosMoisture"       "windDirection"      </span></span>
<span><span class="co">## [10] "avWindSpeed"         "fuelMoisture"        "maxTemp"            </span></span>
<span><span class="co">## [13] "minTemp"             "maxRelHumidity"      "minRelHumidity"     </span></span>
<span><span class="co">## [16] "precipDuration"      "precipAmount"        "wetFlag"            </span></span>
<span><span class="co">## [19] "herbaceousGreenness" "shrubGreenness"      "moistureType"       </span></span>
<span><span class="co">## [22] "measurementType"     "seasonCode"          "solarRadiation"     </span></span>
<span><span class="co">## [25] "maxGustDirection"    "maxGustSpeed"        "snowFlag"</span></span></code></pre>
<p>In order to plot data, we need a valid <code>POSIXct</code> time
axis. We create one here for a station in California reporting in local
time.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datetime</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">observationDate</span>, <span class="va">tbl</span><span class="op">$</span><span class="va">observationTime</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">MazamaCoreUtils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/MazamaCoreUtils/man/parseDatetime.html" class="external-link">parseDatetime</a></span><span class="op">(</span>timezone <span class="op">=</span> <span class="st">"America/Los_Angeles"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="dry-bulb-temeprature">Dry-bulb Temeprature<a class="anchor" aria-label="anchor" href="#dry-bulb-temeprature"></a>
</h2>
<div class="section level3">
<h3 id="time-series-plot">Time series plot<a class="anchor" aria-label="anchor" href="#time-series-plot"></a>
</h3>
<p>The first thing to do with any variable is simply look at it. We plot
it here with different values for partial opacity to better see
overplotted values.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/layout.html" class="external-link">layout</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">datetime</span>, <span class="va">tbl</span><span class="op">$</span><span class="va">dryBulbTemp</span>, pch <span class="op">=</span> <span class="fl">15</span>, cex <span class="op">=</span> <span class="fl">0.4</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/adjustcolor.html" class="external-link">adjustcolor</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">datetime</span>, <span class="va">tbl</span><span class="op">$</span><span class="va">dryBulbTemp</span>, pch <span class="op">=</span> <span class="fl">15</span>, cex <span class="op">=</span> <span class="fl">0.4</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/adjustcolor.html" class="external-link">adjustcolor</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="fl">0.004</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="Raw_Data_Validation_files/figure-html/temp_timeseries-1.png" width="700"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/layout.html" class="external-link">layout</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p>In the upper plot, our eyes notice a few lone outliers and a an
outbreak of outliers in the winter of 2014.</p>
<p>In the lower plot, we can see a <em>‘line’</em> of overplotted values
near 32 F.</p>
</div>
<div class="section level3">
<h3 id="distribution-of-values">Distribution of values<a class="anchor" aria-label="anchor" href="#distribution-of-values"></a>
</h3>
<p>Every atmospheric measurement has reasonable physical limits to its
range. Temperature in the continental US has rarely, if ever exceeded
-50 F to +130 F.</p>
<p>Now let use a histogram and box plot to better see the distribution
of values.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/layout.html" class="external-link">layout</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">dryBulbTemp</span>, n <span class="op">=</span> <span class="va">unitBreaks</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html" class="external-link">boxplot</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">dryBulbTemp</span>, horizontal <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="Raw_Data_Validation_files/figure-html/distribution_of_values-1.png" width="700"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/layout.html" class="external-link">layout</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p>So far, so good. We have a reasonably smooth distribution of values
with a few outliers and an expected spike in readings near the freezing
point of water. Temperature should be expected to hover briefly near
this phase change point, as latent heat associated with freezing or
melting water is not measured by the dry-bulb temperature.</p>
</div>
<div class="section level3">
<h3 id="rate-of-change">Rate of change<a class="anchor" aria-label="anchor" href="#rate-of-change"></a>
</h3>
<p>Every atmospheric variable also has bounds on its rate of change. We
can examine that distribution a well.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/layout.html" class="external-link">layout</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">dryBulbTemp</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">x</span>, n <span class="op">=</span> <span class="va">unitBreaks</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html" class="external-link">boxplot</a></span><span class="op">(</span><span class="va">x</span>, horizontal <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="Raw_Data_Validation_files/figure-html/rate_of_change-1.png" width="700"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/layout.html" class="external-link">layout</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p>This distribution looks reasonable even if some of values (&gt;
50F/hr) seem questionable.</p>
</div>
</div>
<div class="section level2">
<h2 id="zero-missing-value-flag">Zero = missing value flag<a class="anchor" aria-label="anchor" href="#zero-missing-value-flag"></a>
</h2>
<p>The question was raised as to whether zero was used as a missing
value flag in for some variables. Lets find out how many times the
temperature was exactly zero:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">dryBulbTemp</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0</span></span></code></pre>
<p>For temperature, this does not seem to be an issue.</p>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>Except for a few individual outliers and a couple of outlier
outbreaks, the values found for “Dry-bulb temperature” appear
reasonable.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Jonathan Callahan, Eli Grosman.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
